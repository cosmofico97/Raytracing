<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reading and Writing PFM files · Raytracer.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Raytracer.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../demo/">Demo</a></li><li><a class="tocitem" href="../render/">The Render Function</a></li><li><a class="tocitem" href="../interpreter/">Interpreter for the Scene File</a></li><li><a class="tocitem" href="../base_structs/">Base Structs</a></li><li class="is-active"><a class="tocitem" href>Reading and Writing PFM files</a></li><li><a class="tocitem" href="../brdfs_and_pigments/">BRDFs and Pigments</a></li><li><a class="tocitem" href="../cameras/">Cameras</a></li><li><a class="tocitem" href="../tone_mapping/">Tone Mapping</a></li><li><a class="tocitem" href="../renderers/">Renderers</a></li><li><a class="tocitem" href="../transformations/">Transformations</a></li><li><a class="tocitem" href="../shapes/">Avaiable Shapes</a></li><li><a class="tocitem" href="../range_testers/">Range Tester Functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Reading and Writing PFM files</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Reading and Writing PFM files</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/cosmofico97/Raytracing/blob/master/docs/src/readingwritingpfm.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Reading-and-Writing-PFM-file"><a class="docs-heading-anchor" href="#Reading-and-Writing-PFM-file">Reading and Writing PFM file</a><a id="Reading-and-Writing-PFM-file-1"></a><a class="docs-heading-anchor-permalink" href="#Reading-and-Writing-PFM-file" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="Raytracing.InvalidPfmFileFormat" href="#Raytracing.InvalidPfmFileFormat"><code>Raytracing.InvalidPfmFileFormat</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">InvalidPfmFileFormat &lt;: Exception (var::String)</code></pre><p>Self-made exception raised by thne following function in case a reading operation of a PFM file fails:</p><ul><li><p><a href="#Raytracing.parse_img_size"><code>parse_img_size</code></a></p></li><li><p><a href="#Raytracing.parse_endianness"><code>parse_endianness</code></a></p></li><li><p><a href="#Raytracing.read_line"><code>read_line</code></a></p></li><li><p><a href="#Raytracing.read_float"><code>read_float</code></a></p></li><li><p><a href="#Base.read-Tuple{IO,Type{HDRimage}}"><code>read(::IO, ::Type{HDRimage})</code></a></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cosmofico97/Raytracing/blob/9b9f52cef9c39b00b4aabde90ff2107a976f0fdb/src/ReadingWriting.jl#L129-L145">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Raytracing.valid_coordinates" href="#Raytracing.valid_coordinates"><code>Raytracing.valid_coordinates</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">valid_coordinates(img::HDRimage, x::Int, y::Int) :: Bool</code></pre><p>Return <code>true</code> if (<code>x</code>, <code>y</code>) are valid coordinates for the  2D matrix of the <code>HDRimage</code>, else return <code>false</code>.</p><p>See also: <a href="../base_structs/#Raytracing.HDRimage"><code>HDRimage</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cosmofico97/Raytracing/blob/9b9f52cef9c39b00b4aabde90ff2107a976f0fdb/src/ReadingWriting.jl#L11-L18">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Raytracing.pixel_offset" href="#Raytracing.pixel_offset"><code>Raytracing.pixel_offset</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">pixel_offset(img::HDRimage, x::Int, y::Int) :: Int64</code></pre><p>Return the index in the 1D array of the specified pixel (<code>x</code>, <code>y</code>)  for the given <code>HDRimage</code>. Internally checks also if  (<code>x</code>, <code>y</code>)  are valid coordinates for <code>img</code> through the <code>valid_coordinates</code> function.</p><p>See also: <a href="#Raytracing.valid_coordinates"><code>valid_coordinates</code></a>, <a href="../base_structs/#Raytracing.HDRimage"><code>HDRimage</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cosmofico97/Raytracing/blob/9b9f52cef9c39b00b4aabde90ff2107a976f0fdb/src/ReadingWriting.jl#L23-L32">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Raytracing.get_pixel" href="#Raytracing.get_pixel"><code>Raytracing.get_pixel</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_pixel(img::HDRimage, x::Int, y::Int) :: RBG{Float32}</code></pre><p>Return the <code>RBG{Float32}</code> color for the (<code>x</code>, <code>y</code>) pixel in the  given <code>HDRimage</code>, obtained through the <code>pixel_offset</code> function. The indexes for a <code>HDRimage</code> pixel matrix  with <code>w</code> width and <code>h</code> height follow this sketch:</p><pre><code class="language-ditaa">|  (0,0)    (0,1)    (0,2)   ...   (0,w-1)  |
|  (1,0)    (1,1)    (1,2)   ...   (1,w-1)  |
|   ...      ...      ...    ...     ...    |
| (h-1,0)  (h-1,1)  (h-1,2)  ...  (h-1,w-1) |</code></pre><p>See also: <a href="#Raytracing.pixel_offset"><code>pixel_offset</code></a>, <a href="../base_structs/#Raytracing.HDRimage"><code>HDRimage</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cosmofico97/Raytracing/blob/9b9f52cef9c39b00b4aabde90ff2107a976f0fdb/src/ReadingWriting.jl#L38-L53">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Raytracing.set_pixel" href="#Raytracing.set_pixel"><code>Raytracing.set_pixel</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">set_pixel(img::HDRimage, x::Int, y::Int, c::RGB{Float32})
set_pixel(img::HDRimage, x::Int, y::Int, c::RGB{T}) where {T}</code></pre><p>Set the new RGB color <code>c</code> for the (<code>x</code>, <code>y</code>) pixel in  the given <code>HDRimage</code>, acceded through the <code>pixel_offset</code> function. The indexes for a <code>HDRimage</code> pixel  matrix with <code>w</code> width and <code>h</code> height follow this sketch:</p><pre><code class="language-ditaa">|  (0,0)    (0,1)    (0,2)   ...   (0,w-1)  |
|  (1,0)    (1,1)    (1,2)   ...   (1,w-1)  |
|   ...      ...      ...    ...     ...    |
| (h-1,0)  (h-1,1)  (h-1,2)  ...  (h-1,w-1) |</code></pre><p>If <code>c</code> is of a type <code>RGB{T}</code> where <code>T ≠ Float32</code>, it&#39;s called the <code>convert(RGB{Float32}, c)</code> function, which raises an exception if the conversion is not possible.</p><p>See also: <a href="#Raytracing.pixel_offset"><code>pixel_offset</code></a>, <a href="../base_structs/#Raytracing.HDRimage"><code>HDRimage</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cosmofico97/Raytracing/blob/9b9f52cef9c39b00b4aabde90ff2107a976f0fdb/src/ReadingWriting.jl#L68-L88">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.write-Tuple{IO,HDRimage}" href="#Base.write-Tuple{IO,HDRimage}"><code>Base.write</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">write(io::IO, img::HDRimage)</code></pre><p>Write the given <code>HDRimage</code> image using the given <code>IO</code> stream as a PFM file. The <code>endianness</code> used for writing the file is Little Endian (<code>-1.0</code>).</p><p>See also: <a href="#Raytracing.get_pixel"><code>get_pixel</code></a>, <a href="../base_structs/#Raytracing.HDRimage"><code>HDRimage</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cosmofico97/Raytracing/blob/9b9f52cef9c39b00b4aabde90ff2107a976f0fdb/src/ReadingWriting.jl#L93-L100">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Raytracing.parse_img_size" href="#Raytracing.parse_img_size"><code>Raytracing.parse_img_size</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">parse_img_size(line::String) :: (Int64, Int64)</code></pre><p>Return the size <code>(width, height)</code> parsed from a given <code>String</code>, throwing  <code>InvalidPfmFileFormat</code> exception if encounters invalid values. It works inside the <code>read(::IO, ::Type{HDRimage})</code> function.</p><p>See also: <a href="#Base.read-Tuple{IO,Type{HDRimage}}"><code>read(::IO, ::Type{HDRimage})</code></a>,  <a href="#Raytracing.InvalidPfmFileFormat"><code>InvalidPfmFileFormat</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cosmofico97/Raytracing/blob/9b9f52cef9c39b00b4aabde90ff2107a976f0fdb/src/ReadingWriting.jl#L150-L159">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Raytracing.parse_endianness" href="#Raytracing.parse_endianness"><code>Raytracing.parse_endianness</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">parse_endianness(ess::String) :: Float64</code></pre><p>Return the endianness parsed from a given <code>String</code>, throwing  <code>InvalidPfmFileFormat</code> exception if encounters an invalid value. It works inside the <code>read(::IO, ::Type{HDRimage})</code> function.</p><p>See also: <a href="#Base.read-Tuple{IO,Type{HDRimage}}"><code>read(::IO, ::Type{HDRimage})</code></a>,  <a href="#Raytracing.InvalidPfmFileFormat"><code>InvalidPfmFileFormat</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cosmofico97/Raytracing/blob/9b9f52cef9c39b00b4aabde90ff2107a976f0fdb/src/ReadingWriting.jl#L183-L192">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Raytracing.read_float" href="#Raytracing.read_float"><code>Raytracing.read_float</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">read_float(io::IO, ess::Float64) :: Float32</code></pre><p>Return a <code>Float32</code>, readed from the given IO stream <code>io</code> with the  (required) endianness <code>ess</code>; <code>ess</code> must be <code>+1.0</code> (Big Endian) or  <code>-1.0</code> (Little Endian). Controls also if there are enough bits in order to form a <code>Float32</code>,  otherwise throw <code>InvalidPfmFileFormat</code>. It works inside the <code>read(::IO, ::Type{HDRimage})</code> function.</p><p>See also: <a href="#Base.read-Tuple{IO,Type{HDRimage}}"><code>read(::IO, ::Type{HDRimage})</code></a>,  <a href="#Raytracing.InvalidPfmFileFormat"><code>InvalidPfmFileFormat</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cosmofico97/Raytracing/blob/9b9f52cef9c39b00b4aabde90ff2107a976f0fdb/src/ReadingWriting.jl#L207-L219">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Raytracing.read_line" href="#Raytracing.read_line"><code>Raytracing.read_line</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">read_line(io::IO) :: String</code></pre><p>Reads a line from the file whose the given IO object <code>io</code> refers to.  Do understand when the file is ended and when a new line begins. Return the readed line as a <code>String</code>. It works inside the <code>read(::IO, ::Type{HDRimage})</code> function.</p><p>See also: <a href="#Base.read-Tuple{IO,Type{HDRimage}}"><code>read(::IO, ::Type{HDRimage})</code></a>,  <a href="#Raytracing.InvalidPfmFileFormat"><code>InvalidPfmFileFormat</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cosmofico97/Raytracing/blob/9b9f52cef9c39b00b4aabde90ff2107a976f0fdb/src/ReadingWriting.jl#L233-L243">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Raytracing.parse_command_line" href="#Raytracing.parse_command_line"><code>Raytracing.parse_command_line</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">parse_command_line(args::Vector{String}) :: 
    (String, String, Float64, Float64)</code></pre><p>Interpret the command line when the main is executed,  and manage eventual argument errors.</p><p><strong>Input</strong></p><p>A <code>args::Vector{String})</code> with length 2, 3 or 4.</p><p><strong>Returns</strong></p><p>A tuple <code>(infile, outfile, a, γ)</code> containing:</p><ul><li><p><code>infile::String</code> : first string (required), is the input file  name, which must be a PFM format.</p></li><li><p><code>outfile::String</code> : second string (required), is the output filename;  its format can be PNG or TIFF.</p></li><li><p><code>a::Float64</code> : third argument (optional), is the scale factor for  luminosity correction (default 0.18), passed to <code>normalize_image!</code></p></li><li><p><code>γ::Float64</code> : fourth argument (optional), is the gamma factor for  screen correction (default 1.0), passed to <code>γ_correction!</code></p></li></ul><p>See also : <a href="../tone_mapping/#Raytracing.normalize_image!"><code>normalize_image!</code></a>, <a href="../tone_mapping/#Raytracing.γ_correction!"><code>γ_correction!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cosmofico97/Raytracing/blob/9b9f52cef9c39b00b4aabde90ff2107a976f0fdb/src/ReadingWriting.jl#L309-L337">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.read-Tuple{IO,Type{HDRimage}}" href="#Base.read-Tuple{IO,Type{HDRimage}}"><code>Base.read</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">read(io::IO, ::Type{HDRimage}) :: HDRimage</code></pre><p>Read a PFM image from a stream object <code>io</code>, and return a <code>HDRimage</code>  object containing the image. If an error occurs, raise a <code>InvalidPfmFileFormat</code> exception. Calls internally the following functions:</p><ul><li><p><a href="#Raytracing.parse_img_size"><code>parse_img_size</code></a></p></li><li><p><a href="#Raytracing.parse_endianness"><code>parse_endianness</code></a></p></li><li><p><a href="#Raytracing.read_line"><code>read_line</code></a></p></li><li><p><a href="#Raytracing.read_float"><code>read_float</code></a></p></li></ul><p>See also:  <a href="#Raytracing.parse_img_size"><code>parse_img_size</code></a>, <a href="#Raytracing.parse_endianness"><code>parse_endianness</code></a>,  <a href="#Raytracing.read_line"><code>read_line</code></a>, <a href="#Raytracing.read_float"><code>read_float</code></a>, <a href="#Raytracing.InvalidPfmFileFormat"><code>InvalidPfmFileFormat</code></a>, <a href="../base_structs/#Raytracing.HDRimage"><code>HDRimage</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cosmofico97/Raytracing/blob/9b9f52cef9c39b00b4aabde90ff2107a976f0fdb/src/ReadingWriting.jl#L256-L275">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Raytracing.load_image" href="#Raytracing.load_image"><code>Raytracing.load_image</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">load_image(path::Union{String, IO}) :: HDRimage</code></pre><p>Load an image from the specified <code>path</code> in an HDR image format.</p><p>See also: <a href="../base_structs/#Raytracing.HDRimage"><code>HDRimage</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cosmofico97/Raytracing/blob/9b9f52cef9c39b00b4aabde90ff2107a976f0fdb/src/ReadingWriting.jl#L378-L384">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Raytracing.ldr2pfm" href="#Raytracing.ldr2pfm"><code>Raytracing.ldr2pfm</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">ldr2pfm(path::String, outfile::String)</code></pre><p>Load an image from the specified <code>path</code>, convert it in a pfm file format and save it as <code>outfile</code>. It works through the <code>load_image</code> and the  <code>write(::IO, ::HDRimage)</code> function.</p><p>See also: <a href="../base_structs/#Raytracing.HDRimage"><code>HDRimage</code></a>, <a href="#Raytracing.load_image"><code>load_image</code></a>,   <a href="#Base.write-Tuple{IO,HDRimage}"><code>write(::IO, ::HDRimage)</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cosmofico97/Raytracing/blob/9b9f52cef9c39b00b4aabde90ff2107a976f0fdb/src/ReadingWriting.jl#L395-L404">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../base_structs/">« Base Structs</a><a class="docs-footer-nextpage" href="../brdfs_and_pigments/">BRDFs and Pigments »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 30 June 2021 19:44">Wednesday 30 June 2021</span>. Using Julia version 1.4.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
